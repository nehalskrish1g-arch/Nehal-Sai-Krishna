<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive visualization of Karatsuba's fast multiplication algorithm">
    <title>Karatsuba Algorithm - DAA Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .code-line {
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .code-line.active {
            background: rgba(99, 102, 241, 0.2);
            border-left-color: #6366f1;
        }

        .code-line.executed {
            color: #64748b;
        }

        .control-btn {
            transition: all 0.2s ease;
        }

        .control-btn:hover:not(:disabled) {
            transform: translateY(-1px);
        }

        .control-btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .stat-card {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .calculation-step {
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .control-btn:hover {
                transform: none;
            }
            .calculation-step {
                animation: none;
            }
        }
    </style>
</head>

<body class="h-screen font-sans text-slate-200 antialiased overflow-hidden">
    <a href="#main-content"
        class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50 focus:px-4 focus:py-2 focus:bg-indigo-600 focus:text-white">
        Skip to main content
    </a>

    <div class="h-screen flex flex-col overflow-hidden">
        <!-- Header -->
        <header class="border-b border-slate-700/50 bg-slate-900/80 backdrop-blur-sm sticky top-0 z-50">
            <div class="max-w-[1800px] mx-auto px-4 sm:px-6">
                <div class="flex items-center justify-between h-14">
                    <div class="flex items-center gap-4">
                        <a href="index.html"
                            class="flex items-center gap-3 text-slate-300 hover:text-white transition-colors"
                            aria-label="Back to home">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                            </svg>
                            <span class="hidden sm:inline text-sm font-medium">Back</span>
                        </a>
                        <div class="h-6 w-px bg-slate-700" aria-hidden="true"></div>
                        <div>
                            <h1 class="text-base font-semibold text-white">Karatsuba Algorithm</h1>
                            <p class="text-xs text-slate-400 hidden sm:block">Fast Multiplication Visualization</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <span
                            class="px-2 py-1 text-xs font-medium bg-purple-500/20 text-purple-400 rounded-full border border-purple-500/30">
                            Divide & Conquer
                        </span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main id="main-content" class="flex-1 p-3 overflow-hidden">
            <div class="h-full">
                <div class="grid grid-cols-12 gap-3 h-full">

                    <!-- Left Panel: Visualization -->
                    <section class="col-span-8 flex flex-col gap-3 h-full overflow-hidden" aria-labelledby="visualization-heading">
                        <h2 id="visualization-heading" class="sr-only">Algorithm Visualization</h2>

                        <!-- Input Section -->
                        <div class="glass-panel rounded-xl p-4">
                            <h3 class="text-xs font-medium text-slate-300 mb-3">Input Numbers</h3>
                            <div class="flex items-center gap-4">
                                <div class="flex-1">
                                    <label for="num1Input" class="text-xs text-slate-400 block mb-1">Number 1</label>
                                    <input type="text" id="num1Input" value="1234"
                                        class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-sm text-white font-mono focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                        placeholder="Enter first number">
                                </div>
                                <div class="text-2xl text-slate-500 mt-5">×</div>
                                <div class="flex-1">
                                    <label for="num2Input" class="text-xs text-slate-400 block mb-1">Number 2</label>
                                    <input type="text" id="num2Input" value="5678"
                                        class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-sm text-white font-mono focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                        placeholder="Enter second number">
                                </div>
                                <button id="setInputBtn"
                                    class="control-btn px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-xs font-medium mt-5">
                                    Set
                                </button>
                            </div>
                        </div>

                        <!-- Visualization Canvas -->
                        <div class="glass-panel rounded-xl p-4 flex-1 flex flex-col min-h-0">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-xs font-medium text-slate-300">Recursive Decomposition</h3>
                                <div class="flex items-center gap-3 text-[10px]">
                                    <div class="flex items-center gap-1">
                                        <span class="w-2 h-2 rounded-full bg-indigo-500"></span>
                                        <span class="text-slate-400">Level 0</span>
                                    </div>
                                    <div class="flex items-center gap-1">
                                        <span class="w-2 h-2 rounded-full bg-purple-500"></span>
                                        <span class="text-slate-400">Level 1</span>
                                    </div>
                                    <div class="flex items-center gap-1">
                                        <span class="w-2 h-2 rounded-full bg-pink-500"></span>
                                        <span class="text-slate-400">Level 2+</span>
                                    </div>
                                </div>
                            </div>
                            <div id="visualizationArea" class="flex-1 overflow-auto">
                                <div id="recursiveTree" class="min-h-full flex items-center justify-center text-slate-400 text-sm">
                                    Click "Play" or "Step" to begin visualization
                                </div>
                            </div>
                        </div>

                        <!-- Controls & Step Explanation -->
                        <div class="glass-panel rounded-xl p-3">
                            <div class="flex items-center justify-between gap-4">
                                <div class="flex items-center gap-2" role="group" aria-label="Playback controls">
                                    <button id="playBtn"
                                        class="control-btn flex items-center gap-1.5 px-3 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-medium shadow-lg shadow-emerald-500/20"
                                        aria-label="Play animation">
                                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24"
                                            aria-hidden="true">
                                            <path d="M8 5v14l11-7z" />
                                        </svg>
                                        Play
                                    </button>
                                    <button id="pauseBtn"
                                        class="control-btn flex items-center gap-1.5 px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white rounded-lg text-xs font-medium shadow-lg shadow-amber-500/20"
                                        disabled aria-label="Pause animation">
                                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24"
                                            aria-hidden="true">
                                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                                        </svg>
                                        Pause
                                    </button>
                                    <button id="stepBtn"
                                        class="control-btn flex items-center gap-1.5 px-3 py-1.5 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-xs font-medium"
                                        aria-label="Step forward one step">
                                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24"
                                            aria-hidden="true">
                                            <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
                                        </svg>
                                        Step
                                    </button>
                                    <button id="resetBtn"
                                        class="control-btn flex items-center gap-1.5 px-3 py-1.5 bg-rose-600 hover:bg-rose-500 text-white rounded-lg text-xs font-medium"
                                        aria-label="Reset visualization">
                                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                            aria-hidden="true">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                        </svg>
                                        Reset
                                    </button>
                                </div>

                                <div class="flex items-center gap-2">
                                    <label for="speedControl" class="text-xs text-slate-400">Speed:</label>
                                    <select id="speedControl"
                                        class="bg-slate-700 border border-slate-600 rounded px-2 py-1 text-xs text-white focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                        <option value="2000">0.5x</option>
                                        <option value="1000" selected>1x</option>
                                        <option value="500">2x</option>
                                        <option value="250">4x</option>
                                    </select>
                                </div>

                                <div class="flex-1 ml-4">
                                    <p id="stepExplanation" class="text-slate-200 text-xs leading-relaxed"
                                        aria-live="polite" aria-atomic="true">
                                        Set your numbers and click "Play" to begin.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Right Panel: Stats, Calculations & Code -->
                    <aside class="col-span-4 flex flex-col gap-3 h-full min-h-0 overflow-hidden">
                        <!-- Statistics -->
                        <div class="glass-panel rounded-xl p-3">
                            <h3 class="text-xs font-medium text-slate-300 mb-2">Statistics</h3>
                            <div class="grid grid-cols-2 gap-2">
                                <div class="stat-card rounded-lg p-2 text-center">
                                    <div class="text-[10px] text-slate-400">Steps</div>
                                    <div id="stepCount" class="text-lg font-bold text-indigo-400 font-mono">0</div>
                                </div>
                                <div class="stat-card rounded-lg p-2 text-center">
                                    <div class="text-[10px] text-slate-400">Max Depth</div>
                                    <div id="recursionCount" class="text-lg font-bold text-emerald-400 font-mono">0</div>
                                </div>
                                <div class="stat-card rounded-lg p-2 text-center col-span-2">
                                    <div class="text-[10px] text-slate-400">Time Complexity</div>
                                    <div class="text-sm font-semibold text-purple-400 font-mono">O(n<sup>log₂3</sup>) ≈ O(n<sup>1.585</sup>)</div>
                                </div>
                            </div>
                        </div>

                        <!-- Current Calculation -->
                        <div class="glass-panel rounded-xl p-3 flex-1 min-h-0 flex flex-col">
                            <h3 class="text-xs font-medium text-slate-300 mb-2">Calculation Steps</h3>
                            <div id="calculationSteps" class="flex-1 overflow-y-auto space-y-2 text-xs font-mono">
                                <div class="text-slate-400 text-center py-8">No calculations yet</div>
                            </div>
                        </div>

                        <!-- Pseudocode -->
                        <div class="glass-panel rounded-xl p-3 flex-1 flex flex-col min-h-0">
                            <h3 class="text-xs font-medium text-slate-300 mb-2">Pseudocode</h3>
                            <div id="pseudocode"
                                class="font-mono text-[10px] leading-tight overflow-y-auto flex-1 min-h-0 text-slate-400">
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="0">function karatsuba(x, y):</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="1">  if x < 10 or y < 10:</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="2">    return x × y</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="4">  n = max(size(x), size(y))</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="5">  m = n / 2</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="7">  high1 = x / 10^m</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="8">  low1 = x mod 10^m</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="9">  high2 = y / 10^m</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="10">  low2 = y mod 10^m</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="12">  z0 = karatsuba(low1, low2)</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="13">  z1 = karatsuba(high1+low1, high2+low2)</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="14">  z2 = karatsuba(high1, high2)</div>
                                <div class="code-line px-1.5 py-0.5 rounded" data-line="16">  return z2×10^(2m) + (z1-z2-z0)×10^m + z0</div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </main>
    </div>

    <script>
        let algorithmState = {
            num1: 1234,
            num2: 5678,
            isRunning: false,
            isPaused: false,
            speed: 1000,
            maxRecursionDepth: 0
        };

        let stepIndex = 0;
        let allSteps = [];

        const num1Input = document.getElementById('num1Input');
        const num2Input = document.getElementById('num2Input');
        const setInputBtn = document.getElementById('setInputBtn');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const stepBtn = document.getElementById('stepBtn');
        const resetBtn = document.getElementById('resetBtn');
        const speedControl = document.getElementById('speedControl');
        const stepCountEl = document.getElementById('stepCount');
        const recursionCountEl = document.getElementById('recursionCount');
        const stepExplanationEl = document.getElementById('stepExplanation');
        const calculationStepsEl = document.getElementById('calculationSteps');
        const recursiveTreeEl = document.getElementById('recursiveTree');

        function karatsuba(x, y, depth = 0, label = 'root') {
            const step = {
                depth: depth,
                label: label,
                x: x,
                y: y,
                line: -1,
                explanation: '',
                calculations: []
            };

            algorithmState.maxRecursionDepth = Math.max(algorithmState.maxRecursionDepth, depth);

            if (x < 10 || y < 10) {
                const result = x * y;
                step.line = 2;
                step.explanation = `Base case: ${x} × ${y} = ${result}`;
                step.result = result;
                step.calculations.push(`${x} × ${y} = ${result}`);
                allSteps.push(step);
                return result;
            }

            const n = Math.max(x.toString().length, y.toString().length);
            const m = Math.floor(n / 2);
            const divisor = Math.pow(10, m);

            step.line = 5;
            step.explanation = `Split numbers at position ${m}`;
            step.n = n;
            step.m = m;
            allSteps.push({...step});

            const high1 = Math.floor(x / divisor);
            const low1 = x % divisor;
            const high2 = Math.floor(y / divisor);
            const low2 = y % divisor;

            const splitStep = {...step};
            splitStep.line = 10;
            splitStep.explanation = `Split: ${x} = ${high1}×10^${m} + ${low1}, ${y} = ${high2}×10^${m} + ${low2}`;
            splitStep.calculations = [
                `high1 = ${high1}, low1 = ${low1}`,
                `high2 = ${high2}, low2 = ${low2}`
            ];
            splitStep.high1 = high1;
            splitStep.low1 = low1;
            splitStep.high2 = high2;
            splitStep.low2 = low2;
            allSteps.push(splitStep);

            const recStep1 = {...step};
            recStep1.line = 12;
            recStep1.explanation = `Computing z0 = ${low1} × ${low2}`;
            allSteps.push(recStep1);
            const z0 = karatsuba(low1, low2, depth + 1, `${label}-z0`);

            const recStep2 = {...step};
            recStep2.line = 13;
            recStep2.explanation = `Computing z1 = (${high1}+${low1}) × (${high2}+${low2}) = ${high1+low1} × ${high2+low2}`;
            allSteps.push(recStep2);
            const z1 = karatsuba(high1 + low1, high2 + low2, depth + 1, `${label}-z1`);

            const recStep3 = {...step};
            recStep3.line = 14;
            recStep3.explanation = `Computing z2 = ${high1} × ${high2}`;
            allSteps.push(recStep3);
            const z2 = karatsuba(high1, high2, depth + 1, `${label}-z2`);

            const result = z2 * Math.pow(10, 2 * m) + (z1 - z2 - z0) * Math.pow(10, m) + z0;

            const finalStep = {...step};
            finalStep.line = 16;
            finalStep.explanation = `Combining: z2×10^${2*m} + (z1-z2-z0)×10^${m} + z0`;
            finalStep.calculations = [
                `z0 = ${z0}`,
                `z1 = ${z1}`,
                `z2 = ${z2}`,
                `result = ${z2}×10^${2*m} + (${z1}-${z2}-${z0})×10^${m} + ${z0}`,
                `result = ${result}`
            ];
            finalStep.result = result;
            finalStep.z0 = z0;
            finalStep.z1 = z1;
            finalStep.z2 = z2;
            allSteps.push(finalStep);

            return result;
        }

        function generateSteps() {
            allSteps = [];
            algorithmState.maxRecursionDepth = 0;
            
            const initialStep = {
                depth: 0,
                line: 0,
                explanation: `Starting Karatsuba multiplication: ${algorithmState.num1} × ${algorithmState.num2}`,
                calculations: [`Input: ${algorithmState.num1} × ${algorithmState.num2}`]
            };
            allSteps.push(initialStep);

            const result = karatsuba(algorithmState.num1, algorithmState.num2);

            const finalStep = {
                depth: 0,
                line: -1,
                explanation: `✓ Complete! ${algorithmState.num1} × ${algorithmState.num2} = ${result}`,
                calculations: [`Final Result: ${result}`],
                result: result,
                isFinal: true
            };
            allSteps.push(finalStep);

            return allSteps;
        }

        function executeStep() {
            if (stepIndex >= allSteps.length) {
                algorithmState.isRunning = false;
                playBtn.disabled = false;
                pauseBtn.disabled = true;
                stepBtn.disabled = false;
                return;
            }

            const step = allSteps[stepIndex];
            
            stepCountEl.textContent = stepIndex + 1;
            recursionCountEl.textContent = algorithmState.maxRecursionDepth;
            stepExplanationEl.textContent = step.explanation;

            if (step.calculations && step.calculations.length > 0) {
                updateCalculations(step);
            }

            updateTreeVisualization(step);
            highlightCodeLine(step.line);

            stepIndex++;

            if (algorithmState.isRunning && !algorithmState.isPaused) {
                setTimeout(executeStep, algorithmState.speed);
            }
        }

        function updateCalculations(step) {
            if (calculationStepsEl.children[0]?.textContent === 'No calculations yet') {
                calculationStepsEl.innerHTML = '';
            }

            const div = document.createElement('div');
            div.className = 'calculation-step bg-slate-800/50 rounded-lg p-2 border border-slate-700';
            
            let html = `<div class="text-indigo-400 font-semibold mb-1">Step ${stepIndex + 1} (Depth ${step.depth})</div>`;
            
            step.calculations.forEach(calc => {
                html += `<div class="text-slate-300">${calc}</div>`;
            });

            if (step.result !== undefined) {
                html += `<div class="text-emerald-400 font-semibold mt-1">→ ${step.result}</div>`;
            }

            div.innerHTML = html;
            calculationStepsEl.appendChild(div);
            div.scrollIntoView({ behavior: 'smooth', block: 'end' });

            while (calculationStepsEl.children.length > 10) {
                calculationStepsEl.removeChild(calculationStepsEl.firstChild);
            }
        }

        function updateTreeVisualization(step) {
            if (stepIndex === 0) {
                recursiveTreeEl.innerHTML = '';
            }

            const depthColor = [
                'bg-indigo-500/20 border-indigo-500',
                'bg-purple-500/20 border-purple-500',
                'bg-pink-500/20 border-pink-500',
                'bg-rose-500/20 border-rose-500'
            ];

            const colorClass = depthColor[step.depth % depthColor.length] || 'bg-slate-500/20 border-slate-500';

            const box = document.createElement('div');
            box.className = `border-2 rounded-lg p-3 mb-2 ${colorClass}`;
            box.style.marginLeft = `${step.depth * 20}px`;

            let content = `<div class="font-semibold text-sm mb-1">${step.explanation}</div>`;
            
            if (step.x !== undefined && step.y !== undefined) {
                content += `<div class="text-xs text-slate-300 font-mono">${step.x} × ${step.y}</div>`;
            }

            if (step.result !== undefined) {
                content += `<div class="text-xs text-emerald-400 font-mono mt-1">= ${step.result}</div>`;
            }

            box.innerHTML = content;
            recursiveTreeEl.appendChild(box);
            box.scrollIntoView({ behavior: 'smooth', block: 'end' });
        }

        function highlightCodeLine(lineNumber) {
            document.querySelectorAll('.code-line').forEach(line => {
                line.classList.remove('active');
                const lineNum = parseInt(line.dataset.line);
                if (lineNum < lineNumber && lineNum >= 0) {
                    line.classList.add('executed');
                } else if (lineNum !== lineNumber) {
                    line.classList.remove('executed');
                }
            });

            if (lineNumber >= 0) {
                const activeLine = document.querySelector(`.code-line[data-line="${lineNumber}"]`);
                if (activeLine) {
                    activeLine.classList.add('active');
                    activeLine.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            }
        }

        function resetAlgorithm() {
            algorithmState.isRunning = false;
            algorithmState.isPaused = false;
            stepIndex = 0;
            
            stepCountEl.textContent = '0';
            recursionCountEl.textContent = '0';
            stepExplanationEl.textContent = 'Set your numbers and click "Play" to begin.';
            
            calculationStepsEl.innerHTML = '<div class="text-slate-400 text-center py-8">No calculations yet</div>';
            recursiveTreeEl.innerHTML = '<div class="text-slate-400 text-center py-8">Click "Play" or "Step" to begin visualization</div>';
            
            highlightCodeLine(-1);
            
            playBtn.disabled = false;
            pauseBtn.disabled = true;
            stepBtn.disabled = false;
        }

        setInputBtn.addEventListener('click', () => {
            const n1 = parseInt(num1Input.value);
            const n2 = parseInt(num2Input.value);
            
            if (isNaN(n1) || isNaN(n2) || n1 < 0 || n2 < 0) {
                alert('Please enter valid positive numbers');
                return;
            }
            
            algorithmState.num1 = n1;
            algorithmState.num2 = n2;
            resetAlgorithm();
            generateSteps();
        });

        playBtn.addEventListener('click', () => {
            if (stepIndex >= allSteps.length || allSteps.length === 0) {
                generateSteps();
                stepIndex = 0;
            }
            algorithmState.isRunning = true;
            algorithmState.isPaused = false;
            playBtn.disabled = true;
            pauseBtn.disabled = false;
            stepBtn.disabled = true;
            executeStep();
        });

        pauseBtn.addEventListener('click', () => {
            algorithmState.isPaused = true;
            algorithmState.isRunning = false;
            playBtn.disabled = false;
            pauseBtn.disabled = true;
            stepBtn.disabled = false;
        });

        stepBtn.addEventListener('click', () => {
            if (stepIndex >= allSteps.length || allSteps.length === 0) {
                generateSteps();
                stepIndex = 0;
            }
            algorithmState.isRunning = false;
            algorithmState.isPaused = false;
            executeStep();
        });

        resetBtn.addEventListener('click', () => {
            resetAlgorithm();
            allSteps = [];
        });

        speedControl.addEventListener('change', (e) => {
            algorithmState.speed = parseInt(e.target.value);
        });

        generateSteps();
    </script>
</body>

</html>